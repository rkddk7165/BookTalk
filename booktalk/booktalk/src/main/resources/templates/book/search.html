<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>책 검색</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
</head>
<body>
<header th:replace="fragments/navbar :: navbar"></header>

<section class="container">
    <!-- 검색 폼 -->
    <form th:action="@{/books/search}" method="get" accept-charset="UTF-8"
          style="display:flex;gap:8px;margin-bottom:16px;">
        <input type="text" name="query" th:value="${q}" placeholder="책 제목/저자/ISBN">
        <button class="btn" type="submit">검색</button>
    </form>


    <!-- 에러 표시 -->
    <div th:if="${error}" style="margin:8px 0;color:#c33;font-weight:600;">
        [[${error}]]
    </div>

    <!-- 검색 결과 -->
    <div th:if="${result != null}">
        <p th:text="'총 ' + ${result.size()} + '건'"></p>

        <div th:each="book : ${result}" class="card" style="margin:12px 0;padding:12px;">
            <div style="display:flex;gap:12px;">
                <img th:if="${book.thumbnail}" th:src="${book.thumbnail}" alt="thumbnail" width="80">
                <div>
                    <div><strong th:text="${book.title}"></strong></div>
                    <div th:text="${book.author}"></div>
                    <div th:text="${book.publisher}"></div>
                    <a class="btn outline" th:href="@{|/boards/request?isbn=${book.isbn}|}">
                        이 책으로 게시판 요청
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- 검색 결과 없을 때 -->
    <div th:if="${result != null and result.size() == 0}">
        <p>검색 결과가 없습니다.</p>
    </div>
</section>
</body>
</html>
