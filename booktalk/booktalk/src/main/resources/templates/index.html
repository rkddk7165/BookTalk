<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>BookTalk 홈</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <style>
        /* ===== 홈 전용 스코프 ===== */
        .home{ color:#e6e8ee; background:#0b0c10; min-height:100vh; }
        .home .wrap{ width:min(1180px,92vw); margin:0 auto; padding:28px 12px 56px; }

        .home .top {
            display: grid;
            gap: 20px;
            grid-template-columns: 1fr 1fr; /* 상단 자유/추천 → 1:1 */
            margin-bottom: 20px;
        }
        .home .bottom {
            display: grid;
            gap: 20px;
            grid-template-columns: 1fr 1fr; /* 하단 글귀/패널 → 1:1 */
        }


        @media (max-width: 1024px){
            .home .top{ grid-template-columns: 1fr; }
            .home .bottom{ grid-template-columns: 1fr; }
        }

        /* 카드 공통 */
        .home .card{
            background:#15171c; border:1px solid #262a33; border-radius:16px;
            box-shadow:0 12px 28px rgba(0,0,0,.28); overflow:hidden;
        }
        .home .card .head{
            display:flex; align-items:center; justify-content:space-between;
            padding:16px 18px; border-bottom:1px solid #232732;
        }
        .home .card .head h2{ margin:0; font-size:1.08rem; font-weight:800; letter-spacing:.2px; }
        .home .card .head a{ color:#e6e8ee; text-decoration:none; }
        .home .card .head a:hover{ text-decoration:underline; }
        .home .more{ font-size:.92rem; color:#8fb0ff; text-decoration:none; }
        .home .more:hover{ text-decoration:underline; }

        /* 리스트 */
        .home .list{ list-style:none; margin:0; padding:8px 0; }
        .home .item{ padding:12px 18px; border-bottom:1px solid #1b1f27; }
        .home .item:last-child{ border-bottom:none; }

        .home .title-row{
            display:flex; align-items:center; gap:8px; margin-bottom:6px; min-height:22px;
        }
        .home .title{
            color:#e6e8ee; text-decoration:none; font-weight:600; line-height:1.3;
            display:inline-block; max-width:100%; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
        }
        .home .title:hover{ text-decoration:underline; }
        .home .cmt{
            flex:0 0 auto; font-size:.86rem; color:#a9afbd; background:#0f1117;
            border:1px solid #232732; padding:2px 6px; border-radius:8px;
        }

        .home .meta{ font-size:.9rem; color:#a9afbd; display:flex; align-items:center; gap:10px; }
        .home .dot{ opacity:.6; }
        .home .likes{ font-weight:600; }
        .home .empty{ padding:18px; color:#a9afbd; }

        /* 오른쪽 버튼 패널 */
        .home .panel{
            background:#15171c; border:1px solid #262a33; border-radius:16px;
            box-shadow:0 12px 28px rgba(0,0,0,.28); padding:18px;
            display:grid; gap:14px;
        }
        .home .panel .bigbtn{
            display:flex; align-items:center; justify-content:center; gap:10px;
            background:#5b8cff; color:#fff; text-decoration:none; padding:16px 18px;
            border-radius:14px; font-weight:800; font-size:1.02rem; border:0;
            box-shadow:0 10px 22px rgba(91,140,255,.25);
        }
        .home .panel .bigbtn.secondary{
            background:#20c997; box-shadow:0 10px 22px rgba(32,201,151,.22);
        }
        .home .panel .bigbtn:hover{ filter:brightness(1.05); }
        .home .panel .sub{
            font-size:.92rem; color:#a9afbd; text-align:center; margin-top:2px;
        }
    </style>
</head>
<body class="home">

<!-- 상단바 -->
<div th:replace="~{fragments/navbar :: navbar}"></div>

<main class="wrap">

    <!-- 상단 2장: 자유 / 책추천 -->
    <section class="top">

        <!-- 자유게시판 -->
        <article class="card">
            <div class="head">
                <h2><a th:href="@{/boards/free}">자유게시판</a></h2>
                <a class="more" th:href="@{/boards/free}">더보기 →</a>
            </div>
            <ul class="list">
                <li class="item" th:each="p : ${recentFree}">
                    <div class="title-row">
                        <a class="title" th:href="@{|/post/${p.id}|}" th:text="${p.title}">제목</a>
                        <span class="cmt" th:text="|[${p.commentCount}]|">[0]</span>
                    </div>
                    <div class="meta">
                        <span class="author" th:text="${p.authorNickname != null ? p.authorNickname : '익명'}">작성자</span>
                        <span class="dot">·</span>
                        <span class="likes" th:text="|❤ ${p.likeCount}|">❤ 0</span>
                        <span class="dot">·</span>
                        <span class="date" th:text="${#temporals.format(p.createdAt,'yyyy.MM.dd HH:mm')}">2025.01.01 12:00</span>
                    </div>
                </li>
                <li class="empty" th:if="${#lists.isEmpty(recentFree)}">아직 게시글이 없습니다.</li>
            </ul>
        </article>

        <!-- 책추천게시판 -->
        <article class="card">
            <div class="head">
                <h2><a th:href="@{/boards/recommend}">책추천게시판</a></h2>
                <a class="more" th:href="@{/boards/recommend}">더보기 →</a>
            </div>
            <ul class="list">
                <li class="item" th:each="p : ${recentRecommend}">
                    <div class="title-row">
                        <a class="title" th:href="@{|/post/${p.id}|}" th:text="${p.title}">제목</a>
                        <span class="cmt" th:text="|[${p.commentCount}]|">[0]</span>
                    </div>
                    <div class="meta">
                        <span class="author" th:text="${p.authorNickname != null ? p.authorNickname : '익명'}">작성자</span>
                        <span class="dot">·</span>
                        <span class="likes" th:text="|❤ ${p.likeCount}|">❤ 0</span>
                        <span class="dot">·</span>
                        <span class="date" th:text="${#temporals.format(p.createdAt,'yyyy.MM.dd HH:mm')}">2025.01.01 12:00</span>
                    </div>
                </li>
                <li class="empty" th:if="${#lists.isEmpty(recentRecommend)}">아직 게시글이 없습니다.</li>
            </ul>
        </article>

    </section>

    <!-- 하단: 좌(한줄글귀), 우(책 검색 + 도서토론) -->
    <section class="bottom">

        <!-- 한줄글귀게시판 -->
        <article class="card">
            <div class="head">
                <h2><a th:href="@{/boards/quotes}">한줄글귀게시판</a></h2>
                <a class="more" th:href="@{/boards/quotes}">더보기 →</a>
            </div>
            <ul class="list">
                <li class="item" th:each="p : ${recentQuotes}">
                    <div class="title-row">
                        <a class="title" th:href="@{|/post/${p.id}|}" th:text="${p.title}">제목</a>
                        <span class="cmt" th:text="|[${p.commentCount}]|">[0]</span>
                    </div>
                    <div class="meta">
                        <span class="author" th:text="${p.authorNickname != null ? p.authorNickname : '익명'}">작성자</span>
                        <span class="dot">·</span>
                        <span class="likes" th:text="|❤ ${p.likeCount}|">❤ 0</span>
                        <span class="dot">·</span>
                        <span class="date" th:text="${#temporals.format(p.createdAt,'yyyy.MM.dd HH:mm')}">2025.01.01 12:00</span>
                    </div>
                </li>
                <li class="empty" th:if="${#lists.isEmpty(recentQuotes)}">아직 게시글이 없습니다.</li>
            </ul>
        </article>

        <!-- 오른쪽 버튼 패널 -->
        <aside class="panel">
            <a class="bigbtn" th:href="@{/books/search}">🔎 책 검색</a>
            <div class="sub">카카오 도서 검색으로 원하는 책을 찾아보세요</div>
            <a class="bigbtn secondary" th:href="@{/boards/book-discussion}">💬 도서토론 게시판</a>
            <div class="sub">책별 토론글 모아보기</div>
        </aside>

    </section>

</main>
</body>
</html>
