<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>BookTalk í™ˆ</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <style>
        /* ===== í™ˆ ì „ìš© ìŠ¤ì½”í”„ ===== */
        .home{ min-height:100vh; }      /* ê³µí†µ */
        .home.light{ background:#f6f7fb; color:#222; }
        .home.dark{  background:#0b0c10; color:#e6e8ee; }

        .home .wrap{ width:min(1180px,92vw); margin:0 auto; padding:28px 12px 56px; }

        .home .top {
            display: grid;
            gap: 20px;
            grid-template-columns: 1fr 1fr; /* ìƒë‹¨ ììœ /ì¶”ì²œ â†’ 1:1 */
            margin-bottom: 20px;
        }
        .home .bottom {
            display: grid;
            gap: 20px;
            grid-template-columns: 1fr 1fr; /* í•˜ë‹¨ ê¸€ê·€/íŒ¨ë„ â†’ 1:1 */
        }


        @media (max-width: 1024px){
            .home .top{ grid-template-columns: 1fr; }
            .home .bottom{ grid-template-columns: 1fr; }
        }

        /* ë¼ì´íŠ¸ */
        .home.light .card,
        .home.light .panel,
        .home.light .home-sidewriters{
            background:#fff; border:1px solid #e9ecef; box-shadow:0 8px 18px rgba(0,0,0,.06); color:#222;
        }
        /* ë‹¤í¬ */
        .home.dark .card,
        .home.dark .panel,
        .home.dark .home-sidewriters{
            background:#15171c; border:1px solid #262a33; box-shadow:0 12px 28px rgba(0,0,0,.28); color:#e6e8ee;
        }


        .home .card .head h2{ margin:0; font-size:1.08rem; font-weight:800; letter-spacing:.2px; }
        .home .card .head a{ color:#e6e8ee; text-decoration:none; }
        .home .card .head a:hover{ text-decoration:underline; }
        .home .more{ font-size:.92rem; color:#8fb0ff; text-decoration:none; }
        .home .more:hover{ text-decoration:underline; }

        /* ë¦¬ìŠ¤íŠ¸ */
        .home .list{ list-style:none; margin:0; padding:8px 0; }
        .home .item:last-child{ border-bottom:none; }

        .home .title-row{
            display:flex; align-items:center; gap:8px; margin-bottom:6px; min-height:22px;
        }
        .home .title:hover{ text-decoration:underline; }

        /* í—¤ë” ë³´ë” */
        .home.light .card .head{ border-bottom:1px solid #eff2f6; }
        .home.dark  .card .head{ border-bottom:1px solid #232732; }

        /* ë¦¬ìŠ¤íŠ¸ êµ¬ë¶„ì„  */
        .home.light .item{ border-bottom:1px solid #eff2f6; }
        .home.dark  .item{ border-bottom:1px solid #1b1f27; }

        /* ì œëª© ìƒ‰ */
        .home.light .title{ color:#0f172a; }
        .home.dark  .title{ color:#e6e8ee; }

        /* ì½”ë©˜íŠ¸ ë°°ì§€ */
        .home.light .cmt{ background:#f3f6fb; border:1px solid #e6ecf5; color:#475569; }
        .home.dark  .cmt{ background:#0f1117; border:1px solid #232732; color:#a9afbd; }

        /* ë©”íƒ€ í…ìŠ¤íŠ¸ */
        .home.light .meta{ color:#64748b; }
        .home.dark  .meta{ color:#a9afbd; }


        /* ììœ /ì¶”ì²œ/ê¸€ê·€ í—¤ë” ë¼ì´íŠ¸ ì „ìš© íŒŒìŠ¤í…” */
        .home.light .top > article:nth-of-type(1) .head{ background:linear-gradient(135deg,#e8f1ff,#cfe5ff); }
        .home.light .top > article:nth-of-type(2) .head{ background:linear-gradient(135deg,#e9fff4,#ccf7e6); }
        .home.light .bottom > article:nth-of-type(1) .head{ background:linear-gradient(135deg,#fff5e7,#ffe7c7); }


        .home .dot{ opacity:.6; }
        .home .likes{ font-weight:600; }
        .home .empty{ padding:18px; color:#a9afbd; }


        .home .panel .bigbtn{
            display:flex; align-items:center; justify-content:center; gap:10px;
            background:#5b8cff; color:#fff; text-decoration:none; padding:16px 18px;
            border-radius:14px; font-weight:800; font-size:1.02rem; border:0;
            box-shadow:0 10px 22px rgba(91,140,255,.25);
        }
        .home .panel .bigbtn.secondary{
            background:#20c997; box-shadow:0 10px 22px rgba(32,201,151,.22);
        }
        .home .panel .bigbtn:hover{ filter:brightness(1.05); }
        .home .panel .sub{
            font-size:.92rem; color:#a9afbd; text-align:center; margin-top:2px;
        }



        .home-sidewriters .tw-head{
            padding:12px 14px;
            font-weight:800;
            border-bottom:1px solid #232732;
        }
        .home-sidewriters .tw-list{
            list-style:none;
            margin:0; padding:8px 0;
        }
        .home-sidewriters .tw-item{
            display:flex; align-items:center; gap:10px;
            padding:10px 14px;
            border-bottom:1px solid #1b1f27;
        }
        .home-sidewriters .tw-item:last-child{ border-bottom:none; }

        .home-sidewriters .tw-rank{
            width:28px; height:28px; border-radius:8px;
            display:flex; align-items:center; justify-content:center;
            background:#0f1117; border:1px solid #232732; color:#e6e8ee; font-weight:800;
        }
        .home-sidewriters .tw-user{
            display:flex; align-items:center; justify-content:space-between; width:100%;
        }
        .home-sidewriters .tw-user a{
            color:#e6e8ee; text-decoration:none; font-weight:600;
        }
        .home-sidewriters .tw-user a:hover{ text-decoration:underline; }
        .home-sidewriters .tw-count{
            color:#a9afbd; font-weight:700; background:#0f1117; border:1px solid #232732;
            padding:2px 6px; border-radius:8px; font-size:.86rem;
        }

        /* ë©”ë‹¬ ëŠë‚Œ */
        .home-sidewriters .tw-item:nth-child(1) .tw-rank{ background:#ffd166; color:#222; }
        .home-sidewriters .tw-item:nth-child(2) .tw-rank{ background:#ced4da; color:#222; }
        .home-sidewriters .tw-item:nth-child(3) .tw-rank{ background:#c59f6f; color:#222; }

        /* í™”ë©´ì´ ì¢ìœ¼ë©´ ìë™ ìˆ¨ê¹€(ê¸°ì¡´ ë ˆì´ì•„ì›ƒ ê°€ë¦¼ ë°©ì§€) */
        @media (max-width: 1280px){
            .home-sidewriters{ display:none; }
        }
        /* ===== Top Writers: ì™¼ìª½ ê³ ì • ì¬ì ìš© ===== */
        .home-sidewriters{
            position: fixed !important;
            left: 24px !important;
            top: 74px !important;          /* ë„¤ë¹„ ë†’ì´ì— ë§ì¶° ì¡°ì • */
            width: 260px !important;
            z-index: 50 !important;
        }



        /* 1280px ì´í•˜ì—ì„  ì‚¬ì´ë“œ ìˆ¨ê¹€(ê²¹ì¹¨ ë°©ì§€) */
        @media (max-width:1280px){
            .home-sidewriters{ display:none !important; }
            .home .wrap{ padding-left: 12px; }
        }

        /* ===== ê°€ë…ì„± ê°•í™”: í…ìŠ¤íŠ¸ ëŒ€ë¹„ â†‘ ===== */
        /* ì¹´ë“œ í—¤ë”/ë§í¬ */
        .home.light .card .head h2,
        .home.light .card .head a{ color:#111827 !important; }     /* ê±°ì˜ ê²€ì • */
        .home.light .more{ color:#2563eb !important; font-weight:700; }

        /* ë¦¬ìŠ¤íŠ¸ ì œëª© */
        .home.light .title{ color:#111827 !important; font-weight:700; }
        .home.light .title:hover{ text-decoration:underline; }

        /* ë©”íƒ€ ì •ë³´(ì‘ì„±ìÂ·ì¢‹ì•„ìš”Â·ë‚ ì§œ) */
        .home.light .meta{ color:#475569 !important; font-size:.92rem; }

        /* ë¹„ì–´ìˆìŒ ë¬¸êµ¬ */
        .home.light .empty{ color:#64748b !important; }

        /* ì½”ë©˜íŠ¸ ë°°ì§€(ì¡°ê¸ˆ ë” ì„ ëª…í•˜ê²Œ) */
        .home.light .cmt{
            background:#e9efff !important;
            border:1px solid #cfe0ff !important;
            color:#1f3b8a !important;
            font-weight:700;
        }

        /* ì¹´ë“œ í…Œë‘ë¦¬/ê·¸ë¦¼ìë„ ì‚´ì§ ì§„í•˜ê²Œ */
        .home.light .card,
        .home.light .panel,
        .home.light .home-sidewriters{
            border-color:#e3e8ef !important;
            box-shadow:0 10px 20px rgba(16,24,40,.06) !important;
        }

        /* ì‚¬ì´ë“œë°”: ê°€ìš´ë° ì •ë ¬ëœ ì»¨í…Œì´ë„ˆì˜ 'ì™¼ìª½ ë°”ê¹¥'ì— ê³ ì • ë°°ì¹˜ */
        .home-sidewriters{
            position: fixed !important;
            /* ì»¨í…ì¸  ìµœëŒ€í­(min(1180px, 92vw))ì˜ ì™¼ìª½ ëì—ì„œ 40px ë–¨ì–´ì§„ ì§€ì  */
            left: calc(50% - min(1180px, 92vw)/2 - 300px) !important; /* 260(sidebar) + 40(gap) */
            top: 74px !important;     /* ë„¤ë¹„ ë†’ì´ì— ë§ì¶° í•„ìš”ì‹œ 64~88pxë¡œ ì¡°ì • */
            width: 260px !important;
            z-index: 50 !important;
        }

        /* í™”ë©´ì´ ì¢ì•„ì§€ë©´ ìë™ ìˆ¨ê¹€(ê²¹ì¹¨ ë°©ì§€) */
        @media (max-width: 1280px){
            .home-sidewriters{ display:none !important; }
        }
        /* í—¤ë” í–‰ì„ í•œ ì¤„ ì •ë ¬ + ìš°ì¸¡ ë ì •ë ¬ */
        .home .card .head{
            display:flex;
            align-items:center;
            gap:12px;
        }
        .home .card .head h2{
            margin:0;
            font-size:1.08rem;
            font-weight:800;
            letter-spacing:.2px;
            min-width:0;               /* flexì—ì„œ ìˆ˜ì¶• í—ˆìš© */
        }
        .home .card .head .more{
            margin-left:auto;          /* ì˜¤ë¥¸ìª½ ëìœ¼ë¡œ ë°€ê¸° */
            white-space:nowrap;        /* ì¤„ë°”ê¿ˆ ë°©ì§€ */
        }



    </style>
</head>
<body class="home">

<!-- ìƒë‹¨ë°” -->
<div th:replace="~{fragments/navbar :: navbar}"></div>

<!-- ì¢Œì¸¡ Top Writers ê³ ì • íŒ¨ë„: ê¸°ì¡´ ë ˆì´ì•„ì›ƒ ì˜í–¥ ì—†ìŒ -->
<aside class="home-sidewriters" th:if="${topWriters != null}">
    <div class="tw-head">Top Writers</div>
    <ol class="tw-list">
        <li class="tw-item" th:each="tw, iStat : ${topWriters}">
            <div class="tw-rank" th:text="${iStat.index + 1}">1</div>
            <div class="tw-user">
                <a th:href="@{|/users/${tw.userId}|}" th:text="${tw.nickname ?: 'ìµëª…'}">ë‹‰ë„¤ì„</a>
                <span class="tw-count" th:text="|${tw.postCount}|">0</span>
            </div>
        </li>
        <li class="tw-item" th:if="${#lists.isEmpty(topWriters)}">
            <div style="opacity:.8;">ì•„ì§ ì§‘ê³„í•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
        </li>
    </ol>
</aside>


<main class="wrap">

    <!-- ìƒë‹¨ 2ì¥: ììœ  / ì±…ì¶”ì²œ -->
    <section class="top">

        <!-- ììœ ê²Œì‹œíŒ -->
        <article class="card">
            <div class="head">
                <h2><a th:href="@{/boards/free}">ììœ ê²Œì‹œíŒ</a></h2>
                <a class="more" th:href="@{/boards/free}">ë”ë³´ê¸° â†’</a>
            </div>
            <ul class="list">
                <li class="item" th:each="p : ${recentFree}">
                    <div class="title-row">
                        <a class="title" th:href="@{|/post/${p.id}|}" th:text="${p.title}">ì œëª©</a>
                        <span class="cmt" th:text="|[${p.commentCount}]|">[0]</span>
                    </div>
                    <div class="meta">
                        <span class="author" th:text="${p.authorNickname != null ? p.authorNickname : 'ìµëª…'}">ì‘ì„±ì</span>
                        <span class="dot">Â·</span>
                        <span class="likes" th:text="|â¤ ${p.likeCount}|">â¤ 0</span>
                        <span class="dot">Â·</span>
                        <span class="date" th:text="${#temporals.format(p.createdAt,'yyyy.MM.dd HH:mm')}">2025.01.01 12:00</span>
                    </div>
                </li>
                <li class="empty" th:if="${#lists.isEmpty(recentFree)}">ì•„ì§ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</li>
            </ul>
        </article>

        <!-- ì±…ì¶”ì²œê²Œì‹œíŒ -->
        <article class="card">
            <div class="head">
                <h2><a th:href="@{/boards/recommend}">ì±…ì¶”ì²œê²Œì‹œíŒ</a></h2>
                <a class="more" th:href="@{/boards/recommend}">ë”ë³´ê¸° â†’</a>
            </div>
            <ul class="list">
                <li class="item" th:each="p : ${recentRecommend}">
                    <div class="title-row">
                        <a class="title" th:href="@{|/post/${p.id}|}" th:text="${p.title}">ì œëª©</a>
                        <span class="cmt" th:text="|[${p.commentCount}]|">[0]</span>
                    </div>
                    <div class="meta">
                        <span class="author" th:text="${p.authorNickname != null ? p.authorNickname : 'ìµëª…'}">ì‘ì„±ì</span>
                        <span class="dot">Â·</span>
                        <span class="likes" th:text="|â¤ ${p.likeCount}|">â¤ 0</span>
                        <span class="dot">Â·</span>
                        <span class="date" th:text="${#temporals.format(p.createdAt,'yyyy.MM.dd HH:mm')}">2025.01.01 12:00</span>
                    </div>
                </li>
                <li class="empty" th:if="${#lists.isEmpty(recentRecommend)}">ì•„ì§ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</li>
            </ul>
        </article>

    </section>

    <!-- í•˜ë‹¨: ì¢Œ(í•œì¤„ê¸€ê·€), ìš°(ì±… ê²€ìƒ‰ + ë„ì„œí† ë¡ ) -->
    <section class="bottom">

        <!-- í•œì¤„ê¸€ê·€ê²Œì‹œíŒ -->
        <article class="card">
            <div class="head">
                <h2><a th:href="@{/boards/quotes}">í•œì¤„ê¸€ê·€ê²Œì‹œíŒ</a></h2>
                <a class="more" th:href="@{/boards/quotes}">ë”ë³´ê¸° â†’</a>
            </div>
            <ul class="list">
                <li class="item" th:each="p : ${recentQuotes}">
                    <div class="title-row">
                        <a class="title" th:href="@{|/post/${p.id}|}" th:text="${p.title}">ì œëª©</a>
                        <span class="cmt" th:text="|[${p.commentCount}]|">[0]</span>
                    </div>
                    <div class="meta">
                        <span class="author" th:text="${p.authorNickname != null ? p.authorNickname : 'ìµëª…'}">ì‘ì„±ì</span>
                        <span class="dot">Â·</span>
                        <span class="likes" th:text="|â¤ ${p.likeCount}|">â¤ 0</span>
                        <span class="dot">Â·</span>
                        <span class="date" th:text="${#temporals.format(p.createdAt,'yyyy.MM.dd HH:mm')}">2025.01.01 12:00</span>
                    </div>
                </li>
                <li class="empty" th:if="${#lists.isEmpty(recentQuotes)}">ì•„ì§ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</li>
            </ul>
        </article>

        <!-- ì˜¤ë¥¸ìª½ ë²„íŠ¼ íŒ¨ë„ -->
        <aside class="panel">
            <a class="bigbtn" th:href="@{/books/search}">ğŸ” ì±… ê²€ìƒ‰</a>
            <div class="sub">ì¹´ì¹´ì˜¤ ë„ì„œ ê²€ìƒ‰ìœ¼ë¡œ ì›í•˜ëŠ” ì±…ì„ ì°¾ì•„ë³´ì„¸ìš”</div>
            <a class="bigbtn secondary" th:href="@{/boards/book-discussion}">ğŸ’¬ ë„ì„œí† ë¡  ê²Œì‹œíŒ</a>
            <div class="sub">ì±…ë³„ í† ë¡ ê¸€ ëª¨ì•„ë³´ê¸°</div>
        </aside>

    </section>

</main>
<script>
    function toggleTheme() {
        const body = document.body;
        if (body.classList.contains('light')) {
            body.classList.remove('light');
            body.classList.add('dark');
            localStorage.setItem('theme', 'dark');
        } else {
            body.classList.remove('dark');
            body.classList.add('light');
            localStorage.setItem('theme', 'light');
        }
    }

    // ì´ˆê¸° ì§„ì… ì‹œ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ê°’ ì ìš©
    (function() {
        const saved = localStorage.getItem('theme') || 'light';
        document.body.classList.add(saved);
    })();
</script>

</body>


</html>
